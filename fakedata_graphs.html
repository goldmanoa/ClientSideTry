<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="utf-8" />
      <title>Chart.js demo</title>
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
      <script type="text/javascript" src="http://creativecouple.github.com/jquery-timing/jquery-timing.min.js"></script>
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
      <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js" type="text/javascript"></script>
      <script src='Chart.min.js'></script>

      <style type='text/css'>

        body{
          background-color: #f7f7f7;
          font-family: optima;
        }

        #header{
          display: flex;
          justify-content: flex-start;
          position: relative;
          margin-top: 0.5%;
        }

        #AppName{
          flex: 0 1 auto;
          position: absolute;
          left: 50%;
          transform: translateX(-50%);
        }

        #DateTime{
          height: 30%;
          width: 8%;
          display: inline-block;
          font-size: 60%;
          margin-left: 0.5%;
        }

        #footer{
          display: flex;
          justify-content: center;
        }

        .ChartSection{
          margin: 3%;
          display: flex;
          justify-content: center;
          margin-top: 1%;
          background-color: #f2f0f0;
        }

        .chartDisplay{
          height: 70% !important;
          width: 70% !important;
        }

        .logo{
          display: flex;
          height: 35px;
          width: 10%;
        }

      </style>

  </head>
  <body>

    <div id='header'>
      <div id='AppName'>The Dashboard</div>
      <div id='DateTime'></div>
    </div>

    <div id='lineChartSection' class="ChartSection">
      <canvas id="myChart" class='chartDisplay' width="600" height="400"></canvas>
    </div>

    <div id='barChartSetion' class="ChartSection">
        <canvas id="myBarChart" class='chartDisplay' width="600" height="400"></canvas>
    </div>

    <div id='footer'>
      <img src='exelateNielsen.png' class="logo">
    </div>

    <script id='lineChart'>
      var historydata = [
          {
            "itemid": "209212",
            "clock": "1469652772",
            "value": "70094.7330",
            "ns": "117114997"
          },
          {
            "itemid": "209212",
            "clock": "1469652712",
            "value": "70193.9310",
            "ns": "779303278"
          },
          {
            "itemid": "209212",
            "clock": "1469652652",
            "value": "70786.4123",
            "ns": "426823216"
          },
          {
            "itemid": "209212",
            "clock": "1469652592",
            "value": "71255.3154",
            "ns": "876447350"
          },
          {
            "itemid": "209212",
            "clock": "1469652532",
            "value": "70869.0030",
            "ns": "197842745"
          },
          {
            "itemid": "209212",
            "clock": "1469652472",
            "value": "71484.1907",
            "ns": "575134897"
          },
          {
            "itemid": "209212",
            "clock": "1469652412",
            "value": "71546.0064",
            "ns": "933643602"
          },
          {
            "itemid": "209212",
            "clock": "1469652352",
            "value": "71199.7810",
            "ns": "96571696"
          },
          {
            "itemid": "209212",
            "clock": "1469652292",
            "value": "71335.6817",
            "ns": "538306187"
          },
          {
            "itemid": "209212",
            "clock": "1469652232",
            "value": "71731.6897",
            "ns": "650528264"
          },
          {
            "itemid": "209212",
            "clock": "1469652172",
            "value": "71899.8721",
            "ns": "771719350"
          },
          {
            "itemid": "209212",
            "clock": "1469652112",
            "value": "72103.9860",
            "ns": "932686699"
          },
          {
            "itemid": "209212",
            "clock": "1469652052",
            "value": "72406.6274",
            "ns": "838965803"
          },
          {
            "itemid": "209212",
            "clock": "1469651992",
            "value": "72922.2704",
            "ns": "878239007"
          },
          {
            "itemid": "209212",
            "clock": "1469651932",
            "value": "72406.1557",
            "ns": "963485881"
          },
          {
            "itemid": "209212",
            "clock": "1469651872",
            "value": "72377.3711",
            "ns": "933590601"
          },
          {
            "itemid": "209212",
            "clock": "1469651812",
            "value": "72470.2687",
            "ns": "975495844"
          },
          {
            "itemid": "209212",
            "clock": "1469651752",
            "value": "72689.3400",
            "ns": "422708394"
          },
          {
            "itemid": "209212",
            "clock": "1469651692",
            "value": "73003.0680",
            "ns": "816999503"
          },
          {
            "itemid": "209212",
            "clock": "1469651632",
            "value": "73516.5410",
            "ns": "408762976"
          },
          {
            "itemid": "209212",
            "clock": "1469651572",
            "value": "72832.1404",
            "ns": "982570374"
          },
          {
            "itemid": "209212",
            "clock": "1469651512",
            "value": "72943.0551",
            "ns": "971212577"
          },
          {
            "itemid": "209212",
            "clock": "1469651452",
            "value": "73249.9674",
            "ns": "835074290"
          },
          {
            "itemid": "209212",
            "clock": "1469651392",
            "value": "73122.6810",
            "ns": "963333829"
          },
          {
            "itemid": "209212",
            "clock": "1469651332",
            "value": "72508.0504",
            "ns": "703400807"
          },
          {
            "itemid": "209212",
            "clock": "1469651272",
            "value": "72792.6067",
            "ns": "963714897"
          },
          {
            "itemid": "209212",
            "clock": "1469651212",
            "value": "73019.8517",
            "ns": "320914327"
          },
          {
            "itemid": "209212",
            "clock": "1469651152",
            "value": "72915.5154",
            "ns": "757020667"
          },
          {
            "itemid": "209212",
            "clock": "1469651092",
            "value": "73079.2107",
            "ns": "967288991"
          },
          {
            "itemid": "209212",
            "clock": "1469651032",
            "value": "73526.2874",
            "ns": "184971459"
          },
          {
            "itemid": "209212",
            "clock": "1469650972",
            "value": "73614.6704",
            "ns": "701864074"
          },
          {
            "itemid": "209212",
            "clock": "1469650913",
            "value": "73881.8880",
            "ns": "3887003"
          },
          {
            "itemid": "209212",
            "clock": "1469650852",
            "value": "73454.9260",
            "ns": "498823486"
          },
          {
            "itemid": "209212",
            "clock": "1469650792",
            "value": "73743.5624",
            "ns": "166141373"
          },
          {
            "itemid": "209212",
            "clock": "1469650732",
            "value": "73508.4317",
            "ns": "562679777"
          },
          {
            "itemid": "209212",
            "clock": "1469650672",
            "value": "73214.3141",
            "ns": "544624555"
          },
          {
            "itemid": "209212",
            "clock": "1469650612",
            "value": "72733.2944",
            "ns": "915532764"
          },
          {
            "itemid": "209212",
            "clock": "1469650552",
            "value": "73106.5670",
            "ns": "805863543"
          },
          {
            "itemid": "209212",
            "clock": "1469650492",
            "value": "73221.3360",
            "ns": "575562436"
          },
          {
            "itemid": "209212",
            "clock": "1469650432",
            "value": "72904.2794",
            "ns": "548292730"
          },
          {
            "itemid": "209212",
            "clock": "1469650372",
            "value": "72821.1297",
            "ns": "956275731"
          },
          {
            "itemid": "209212",
            "clock": "1469650312",
            "value": "72739.0234",
            "ns": "914351197"
          },
          {
            "itemid": "209212",
            "clock": "1469650252",
            "value": "73074.7580",
            "ns": "879341187"
          },
          {
            "itemid": "209212",
            "clock": "1469650192",
            "value": "73352.3957",
            "ns": "514449964"
          },
          {
            "itemid": "209212",
            "clock": "1469650132",
            "value": "73008.2367",
            "ns": "569740193"
          },
          {
            "itemid": "209212",
            "clock": "1469650072",
            "value": "73112.1497",
            "ns": "726260350"
          },
          {
            "itemid": "209212",
            "clock": "1469650012",
            "value": "72980.7870",
            "ns": "766673410"
          },
          {
            "itemid": "209212",
            "clock": "1469649952",
            "value": "72368.6720",
            "ns": "451444140"
          },
          {
            "itemid": "209212",
            "clock": "1469649892",
            "value": "73168.2667",
            "ns": "497118667"
          },
          {
            "itemid": "209212",
            "clock": "1469649832",
            "value": "72381.6441",
            "ns": "90862042"
          },
          {
            "itemid": "209212",
            "clock": "1469649772",
            "value": "72310.8280",
            "ns": "717824582"
          },
          {
            "itemid": "209212",
            "clock": "1469649712",
            "value": "72749.7264",
            "ns": "347063650"
          },
          {
            "itemid": "209212",
            "clock": "1469649652",
            "value": "72509.4037",
            "ns": "181575831"
          },
          {
            "itemid": "209212",
            "clock": "1469649592",
            "value": "72243.0507",
            "ns": "899155700"
          },
          {
            "itemid": "209212",
            "clock": "1469649532",
            "value": "72386.6424",
            "ns": "677652756"
          },
          {
            "itemid": "209212",
            "clock": "1469649472",
            "value": "72263.1000",
            "ns": "891324900"
          },
          {
            "itemid": "209212",
            "clock": "1469649412",
            "value": "71707.6924",
            "ns": "580982824"
          },
          {
            "itemid": "209212",
            "clock": "1469649352",
            "value": "71525.8137",
            "ns": "541024106"
          },
          {
            "itemid": "209212",
            "clock": "1469649292",
            "value": "72116.6631",
            "ns": "766996991"
          },
          {
            "itemid": "209212",
            "clock": "1469649232",
            "value": "73001.0430",
            "ns": "383513548"
          },
          {
            "itemid": "209212",
            "clock": "1469649172",
            "value": "73255.9654",
            "ns": "177629636"
          },
          {
            "itemid": "209212",
            "clock": "1469649112",
            "value": "73221.3834",
            "ns": "114306161"
          },
          {
            "itemid": "209212",
            "clock": "1469649052",
            "value": "72963.2194",
            "ns": "973007635"
          },
          {
            "itemid": "209212",
            "clock": "1469648992",
            "value": "73075.6971",
            "ns": "207589381"
          },
          {
            "itemid": "209212",
            "clock": "1469648932",
            "value": "73002.9427",
            "ns": "816094260"
          },
          {
            "itemid": "209212",
            "clock": "1469648872",
            "value": "72765.4254",
            "ns": "927483787"
          },
          {
            "itemid": "209212",
            "clock": "1469648812",
            "value": "72685.8904",
            "ns": "796656118"
          },
          {
            "itemid": "209212",
            "clock": "1469648752",
            "value": "73032.8751",
            "ns": "92238269"
          },
          {
            "itemid": "209212",
            "clock": "1469648692",
            "value": "73094.9391",
            "ns": "368577536"
          },
          {
            "itemid": "209212",
            "clock": "1469648632",
            "value": "72850.8667",
            "ns": "225881995"
          },
          {
            "itemid": "209212",
            "clock": "1469648572",
            "value": "72391.5474",
            "ns": "895822169"
          },
          {
            "itemid": "209212",
            "clock": "1469648512",
            "value": "72523.9974",
            "ns": "154460139"
          },
          {
            "itemid": "209212",
            "clock": "1469648452",
            "value": "72633.9954",
            "ns": "194476013"
          },
          {
            "itemid": "209212",
            "clock": "1469648392",
            "value": "72889.0827",
            "ns": "116110082"
          },
          {
            "itemid": "209212",
            "clock": "1469648332",
            "value": "72978.3497",
            "ns": "460586348"
          },
          {
            "itemid": "209212",
            "clock": "1469648272",
            "value": "72753.1484",
            "ns": "567509092"
          },
          {
            "itemid": "209212",
            "clock": "1469648212",
            "value": "72745.1657",
            "ns": "534654546"
          },
          {
            "itemid": "209212",
            "clock": "1469648152",
            "value": "73009.6971",
            "ns": "795186190"
          },
          {
            "itemid": "209212",
            "clock": "1469648092",
            "value": "73017.6997",
            "ns": "666354954"
          },
          {
            "itemid": "209212",
            "clock": "1469648032",
            "value": "72985.1817",
            "ns": "570802374"
          },
          {
            "itemid": "209212",
            "clock": "1469647972",
            "value": "72962.8637",
            "ns": "922950234"
          },
          {
            "itemid": "209212",
            "clock": "1469647912",
            "value": "71891.2210",
            "ns": "629012401"
          },
          {
            "itemid": "209212",
            "clock": "1469647852",
            "value": "69167.5571",
            "ns": "467266329"
          },
          {
            "itemid": "209212",
            "clock": "1469647792",
            "value": "69166.4940",
            "ns": "79682480"
          },
          {
            "itemid": "209212",
            "clock": "1469647732",
            "value": "69294.8624",
            "ns": "543868357"
          },
          {
            "itemid": "209212",
            "clock": "1469647672",
            "value": "70161.7944",
            "ns": "972353224"
          },
          {
            "itemid": "209212",
            "clock": "1469647612",
            "value": "69565.9870",
            "ns": "986661180"
          },
          {
            "itemid": "209212",
            "clock": "1469647552",
            "value": "68857.2774",
            "ns": "378711814"
          },
          {
            "itemid": "209212",
            "clock": "1469647492",
            "value": "69953.6684",
            "ns": "295956696"
          },
          {
            "itemid": "209212",
            "clock": "1469647432",
            "value": "70612.7770",
            "ns": "592230902"
          },
          {
            "itemid": "209212",
            "clock": "1469647372",
            "value": "70513.5994",
            "ns": "707240607"
          },
          {
            "itemid": "209212",
            "clock": "1469647312",
            "value": "69734.7737",
            "ns": "822281881"
          },
          {
            "itemid": "209212",
            "clock": "1469647252",
            "value": "69138.9367",
            "ns": "635066728"
          },
          {
            "itemid": "209212",
            "clock": "1469647192",
            "value": "69429.5910",
            "ns": "490901860"
          },
          {
            "itemid": "209212",
            "clock": "1469647132",
            "value": "70065.8974",
            "ns": "136912219"
          },
          {
            "itemid": "209212",
            "clock": "1469647072",
            "value": "70020.3014",
            "ns": "742145502"
          },
          {
            "itemid": "209212",
            "clock": "1469647012",
            "value": "72649.2951",
            "ns": "210433622"
          },
          {
            "itemid": "209212",
            "clock": "1469646952",
            "value": "73230.8394",
            "ns": "27330138"
          },
          {
            "itemid": "209212",
            "clock": "1469646892",
            "value": "73279.2074",
            "ns": "274840556"
          },
          {
            "itemid": "209212",
            "clock": "1469646832",
            "value": "72502.2847",
            "ns": "162593977"
          }
        ];
        function timeConverter(clock){
          var a = new Date(clock * 1000);
          var months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
          var year = a.getFullYear();
          var month = months[a.getMonth()];
          var date = a.getDate();
          var hour = a.getHours();
          var min = a.getMinutes();
          var sec = a.getSeconds();
          var time = date + ' ' + month + ' ' + year + ' ' + hour + ':' + min + ':' + sec ;
          return time;
        }
      var clocksarray = [];
      var valuesarray = [];
      historydata.forEach(function(element){
        clocksarray.push(timeConverter(element.clock));
        valuesarray.push(element.value);
      });
      console.log(clocksarray[5]);
      var data = {
        labels: clocksarray,
        datasets: [
          {
              backgroundColor: "rgba(12,81,138,0.4)",
              borderColor: "rgba(12,81,138,1)",
              borderWidth: 1.5,
              borderCapStyle: 'butt',
              label: "Sodium intake",
              fillColor: "rgba(220,220,220,0.4)",
              strokeColor: "rgba(220,220,220,1)",
              pointColor: "rgba(220,220,220,1)",
              pointStrokeColor: "#fff",
              pointHighlightFill: "#fff",
              pointHighlightStroke: "rgba(220,220,220,1)",
              data: valuesarray
          },
            {
              backgroundColor: "rgba(271,176,47,0.4)",
              borderColor: "rgba(271,176,47,1)",
              borderWidth: 1.5,
              borderCapStyle: 'butt',
              label: "Sodium intake",
              fillColor: "rgba(220,220,220,0.2)",
              strokeColor: "rgba(220,220,220,1)",
              pointColor: "rgba(220,220,220,1)",
              pointStrokeColor: "#fff",
              pointHighlightFill: "#fff",
              pointHighlightStroke: "rgba(220,220,220,1)",
              data: [16500, 15900, 18000, 18100, 15006, 15500, 14000]
            },
            {
              backgroundColor: "rgba(249,111,54,0.4)",
              borderColor: "rgba(249,111,54,1)",
              borderWidth: 1.5,
              borderCapStyle: 'butt',
              label: "Sugar intake",
              pointColor: "rgba(151,187,205,1)",
              pointStrokeColor: "#fff",
              pointHighlightFill: "#fff",
              pointHighlightStroke: "rgba(151,187,205,1)",
              data: [12800, 14800, 14000, 11900, 18600, 12700, 19000]
            }
          ]
        }

      new Chart(document.getElementById("myChart").getContext('2d') , {
          type: "line",
          data: data,
      });

    </script>

    <script id='barChart'>

      var data = {
      labels: clocksarray,
      datasets: [
                    {
                      label: "My First dataset",
                      backgroundColor: [
                          'rgba(12,81,138,0.6)',
                          'rgba(12,81,138,0.6)',
                          'rgba(12,81,138,0.6)',
                          'rgba(12,81,138,0.6)',
                          'rgba(12,81,138,0.6)',
                          'rgba(12,81,138,0.6)',
                      ],
                      borderColor: [
                          'rgba(12,81,138,1)',
                          'rgba(12,81,138,1)',
                          'rgba(12,81,138,1)',
                          'rgba(12,81,138,1)',
                          'rgba(12,81,138,1)',
                          'rgba(12,81,138,1)',
                      ],
                      borderWidth: 1,
                      data: valuesarray,
                    },
                    {
                      label: "My Second dataset",
                      backgroundColor: [
                          'rgba(271,176,47,0.6)',
                          'rgba(271,176,47,0.6)',
                          'rgba(271,176,47,0.6)',
                          'rgba(271,176,47,0.6)',
                          'rgba(271,176,47,0.6)',
                          'rgba(271,176,47,0.6)',
                      ],
                      borderColor: [
                          'rgba(271,176,47,1)',
                          'rgba(271,176,47,1)',
                          'rgba(271,176,47,1)',
                          'rgba(271,176,47,1)',
                          'rgba(271,176,47,1)',
                          'rgba(271,176,47,1)',
                      ],
                      borderWidth: 1,
                      data: [65000, 59000, 80000, 81000, 56000, 55000, 40000],
                    },
                    {
                      label: "My Second dataset",
                      backgroundColor: [
                          'rgba(249,111,54,0.6)',
                          'rgba(249,111,54,0.6)',
                          'rgba(249,111,54,0.6)',
                          'rgba(249,111,54,0.6)',
                          'rgba(249,111,54,0.6)',
                          'rgba(249,111,54,0.6)',
                      ],
                      borderColor: [
                          'rgba(249,111,54,1)',
                          'rgba(249,111,54,1)',
                          'rgba(249,111,54,1)',
                          'rgba(249,111,54,1)',
                          'rgba(249,111,54,1)',
                          'rgba(249,111,54,1)',
                      ],
                      borderWidth: 1,
                      data: [65000, 59000, 80000, 81000, 56000, 55000, 40000],
                    }
                ]
            };


      new Chart(document.getElementById("myBarChart").getContext('2d') , {
          type: "bar",
          data: data,
        });


    </script>

    <script id='dateLogic'>

      var date = new Date();
      var n = date.toDateString();
      var time = date.toLocaleTimeString();

      document.getElementById('DateTime').innerHTML = n + ' ' + time;

    </script>

    <script id='timerLogic'>

      //  $('#barChartSetion').repeat().wait(4000).hide().wait(4000).hide();

      //  $("#lineChartSection").repeat().wait(4000).show().wait(4000).hide();

      $(document).ready(function(){

          $("#barChartSetion").hide();

          function show_second(){
              $("#lineChartSection").hide();
              $("#barChartSetion").show();
              setTimeout(show_first,5000);
          }


          function show_first(){
              $("#lineChartSection").show();
              $("#barChartSetion").hide();
              setTimeout(show_second,5000);
          }

          setTimeout(show_second,5000);
      });



    </script>

    <script id='serverLogic'>

      var ajax_call = function() {
            $.ajax({
             url: '',
            error: function() {
            },
             dataType: 'json',
             success: function(data) {

             },
             type: 'GET'
            });
        };

      var interval = 1000 * 60 * 16;

      setInterval(ajax_call, interval);

    </script>

  </body>
</html>
